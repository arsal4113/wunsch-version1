!function(e){e.fn.ajaxBrowse=function(t){var i={this:this,settings:e.extend({},{contentArea:".browse-row",loader:'<div class="gradient-progress row"></div>',navigationContainer:"#customer-segment-row",loaderContainer:"#header",priceLimit:20},t),init:function(){i.this.filter("a").not("#discover-my-world").each(function(){e(this).click(function(t){var a=e(this);t.preventDefault(),i.navigation(a.attr("id")),i.requestUrl(a.attr("id"),a.data("title"),a.attr("href"),!0),ga("set","page",a.attr("href")),ga("send","pageview")})}),window.addEventListener("popstate",function(e){void 0!==e.state.url&&(i.navigation(e.state.linkId),i.requestUrl(e.state.linkId,e.state.title,e.state.url,!1))}),i.checkSubNavVisibility(),i.updateNaviScroll(),i.updateSubNaviScroll(),i.updatePriceFilter(),e(window).on("scroll",function(e){i.updateNaviScroll()})},requestUrl:function(t,a,r,n){i.scrollTop(),i.addLoader(),e.ajax({url:r,success:function(c){if(e(i.settings.contentArea).html(c),n){var s={browse:!0,url:r,title:a,linkId:t};history.pushState(s,a,r)}i.changePageTitle(a),i.checkBanner(),i.removeLoader(),i.updatePriceFilter(),checkProductImpressions();try{e(".wishlist-item-link").wishlistify()}catch(e){}}})},addLoader:function(){i.removeLoader(),e(i.settings.loaderContainer).prepend(e(i.settings.loader))},removeLoader:function(){e(".gradient-progress").remove()},scrollTop:function(){return e("html, body").animate({scrollTop:0},"slow",function(){i.updateNaviScroll(),i.updateSubNaviScroll()}),!1},changePageTitle:function(e){var t=document.title;try{document.title=e}catch(e){document.title=t}},checkBanner:function(){0==categoryImage?(e("#category-banner").css("height","0px").addClass("empty-banner"),e(".banner-wrapper style").remove(),e(".banner-text").remove()):(e(window).width()<850&&e(window).innerWidth()>e(window).innerHeight()||e(window).width()<480?e("#category-banner").css("height","200px"):e(window).width()<1025?e("#category-banner").css("height","250px"):e("#category-banner").css("height","320px"),e("#category-banner").removeClass("empty-banner"),e(".banner-wrapper").css("background-image","url("+categoryImage+")"),e(".banner-wrapper style").remove(),e(".banner-text").remove(),e(".banner-wrapper").append('<div class="row banner-text"><div class="container"></div></div>'),e(".banner-text .container").append('<div class="title-wrapper"></div>'),e(".title-wrapper").append('<span class="category-banner-headline" style="'+headlineStyle+'">'+categoryHeadline+"</span>"),"undefined"!=typeof categorySubtitle&&categorySubtitle&&e(".title-wrapper").append('<br><span class="category-banner-caption"  style="'+captionStyle+'">'+categorySubtitle+"</span>"))},updatePriceFilter:function(){var t=e("#slider-range"),i=1,a=20;try{a=void 0!==window.filter.under&&window.filter.under?window.filter.under:priceLimit,i=void 0!==window.filter.upper&&window.filter.upper?window.filter.upper:priceFrom,t.slider({min:priceFrom,max:priceLimit,values:[i,a]}),e("#amount").val("€"+i+" - €"+a),e(".price-stop, .single-step").remove(),t.each(function(){var r,n=e(this).data().uiSlider.options,c=n.max-n.min,s=0,o=[];r=priceLimit<=50?5:priceLimit<=100?10:priceLimit<500?50:priceLimit/10;for(var l=function(t,i,a){return e('<label class="price-stop '+i+'"><a href="#">€'+t+"</a></label>").css("left",a+"%")},d=0;d<=c;d++)if(d>=i&&d<a){var p=d+n.min,v=d/c*100;if(0===d||d===s-1||d===priceLimit-1){if(d===priceLimit/2-1){var u=new l(p,"in-range middle",v);o.push(u)}else{var h=new l(p,"in-range",v);o.push(h)}s+=r}}else{p=d+n.min,v=d/c*100;if(0===d||d===s-1||d===priceLimit-1){if(d===priceLimit/2-1){var f=new l(p,"middle",v);o.push(f)}else{var w=new l(p,"",v);o.push(w)}s+=r}}t.append(o)}),e("#slider-range").find("label a").each(function(){var t=+e(this).text().replace(/[^0-9]/gi,"");i<t&&t<=a&&e(this).parent().addClass("in-range")})}catch(e){}},navigation:function(t){var i=e("#"+t).parent(),a=i.find("img"),r=e(".nav-item.active"),n=r.find("img"),c=e("#filter-options li");if(r.removeClass("active has-active-children"),n.data("src")&&n.attr("src",n.data("src")),i.addClass("active"),a.data("src-selected")&&a.attr("src",a.data("src-selected")),c.removeClass("active"),i.attr("ref")&&(e(".navbar-nav.level-1").removeClass("active"),e("ul#"+i.attr("ref")).addClass("active")),i.parent().attr("id")){var s=e("li[ref="+i.parent().attr("id")+"]"),o=s.find("img");s.addClass("has-active-children"),o.data("src-selected")&&o.attr("src",o.data("src-selected"))}else i.siblings(".has-active-children").each(function(){e(this).removeClass("has-active-children");var t=e(this).find("img");t.data("src")&&t.attr("src",t.data("src"))});this.checkSubNavVisibility(),t!=r.attr("id")&&e("#filter input.filter-button").each(function(){e(this).prop("checked",!1)});try{window.filter.free_shipping=0,window.filter.discounts=0,window.filter.fast_shipping=0,window.filter.low_stock=0,window.filter.top_rated=0,window.filter.free_return=0,window.filter.page=1}catch(e){}},checkSubNavVisibility:function(){var t=0;e("#customer-segment-row .row > .col-12 .container .row.sub-nav").css("display",e("#customer-segment-row .row > .col-12 .container .row .navbar-nav.level-1.active").children().length?"block":"none");for(var i=e(".level-1.active li").length,a=1;a<=i;a++)t+=e(".level-1.active > li:nth-of-type("+a+")").width();(e(".nav-item.active").hasClass("has-children")||e(".nav-item").hasClass("has-active-children"))&&t>e("#category-subnav").width()?e(".sub-navbar-control").show():e(".sub-navbar-control").hide()},updateNaviScroll:function(){var t=e("#category-navigation .level-0 > .nav-item.active, #category-navigation .level-0 > .nav-item.has-active-children");t.length&&e("#category-navigation").scrollLeft(t.position().left)},updateSubNaviScroll:function(){var t=e("#category-subnav .level-1 > .nav-item.active");t.length&&e("#category-subnav").scrollLeft(t.position().left)}};return i.init(),i}}(jQuery);