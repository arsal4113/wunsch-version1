$.widget("iways.mini_cart",{options:{toggler:"#mini-cart-icon",container:"#mini-cart-container",loginContainer:"#user-content .burger-wrapper .row.menu-account .container",loginMessage:"",checkoutUrl:"",guestButtonText:"",itemDeleteMessage:"Do you really want to remove that item?",cartLoader:".mini-cart-loader",refreshUrl:!1,itemRemoveMessageTime:1e3,logoUrl:"",logoUrlNotScrolled:""},_create:function(){this._super();var e=this,t=!1,i=!1;$(this.options.toggler).on("click mouseover",function(o){var n="click"===o.type;t=!1,i=!1,catcher.isMobile&&!n||($(this).data("checkout-url")&&!catcher.isMobile&&n?window.location.href=$(this).data("checkout-url"):$(window).width()<=1024&&$(this).data("cart-url")&&n?window.location.href=$(this).data("cart-url"):n?e.toggle():e.show())}),$(this.options.toggler).on("mouseout",function(){(t=!0)&&i&&e.hide()}),$("#mini-cart-container").on("mouseleave",function(){i=!0,t&&i&&e.hide()}),$("body #user-account").on("click mouseover",function(t){var i=$(e.options.container),o=$(e.options.toggler);i.is(t.target)||0!==i.has(t.target).length||o.is(t.target)||0!==o.has(t.target).length||e.element.hasClass("shown")&&e.hide()}),$("body").click(function(t){var i=$(e.options.container),o=$(e.options.toggler);i.is(t.target)||0!==i.has(t.target).length||o.is(t.target)||0!==o.has(t.target).length||e.element.hasClass("shown")&&e.hide()}),this.element.find("a.delete-item, a.undelete-item").on("click",function(t){t.preventDefault(),e.deleteUndeleteItem(this)})},toggle:function(){this.element.hasClass("hidden")?this.show():this.hide()},show:function(){$("#header").addClass("mini-cart-shown"),this.element.addClass("shown").removeClass("hidden"),$(this.options.toggler).addClass("shown"),$("#mini-cart-background").show(),$("#search-switch").hide()},hide:function(){$("#header").removeClass("mini-cart-shown"),this.element.addClass("hidden").removeClass("shown"),$(this.options.toggler).removeClass("shown"),$("#mini-cart-background").hide(),$("#search-switch").show()},toggleLoader:function(e){e?$(this.options.cartLoader).show():$(this.options.cartLoader).hide()},deleteUndeleteItem:function(e){var t=this;this.options.refreshUrl&&$.ajax({url:$(e).attr("href"),success:function(i){void 0!==i.response.success&&void 0!==i.response.message&&(t.softRefresh(),$(document).trigger("ebay_checkout_cart_removed_item_"+$(e).data("item-id")))}})},refresh:function(e=!1){var t=this;this.options.refreshUrl&&$.ajax({url:this.options.refreshUrl,success:function(i){$(".mini-cart-container").replaceWith(i),e&&t.show(),t.toggleLoader(!1),$(window).width()>767&&$(".mini-cart-wrapper").addClass("shown").removeClass("hidden"),t.refreshItemCount()}})},softRefresh:function(e=null){e=e||this.options.itemRemoveMessageTime;setTimeout($.proxy(this.refresh,this),e)},refreshItemCount:function(){var e=$(".mini-cart-item-row").length;e?$("#mini-cart-icon .item-count").length?$("#mini-cart-icon .item-count").html(e):$("#mini-cart-icon").append($('<span class="item-count">'+e+"</span>")):$("#mini-cart-icon .item-count").remove()}});