var google={buyerId:void 0,ecommerce:{},event:"page",loginType:"account",registrationMethod:"Form Fill",registrationStep:void 0,resultsNo:void 0,userGender:void 0,userId:void 0},pandata={basketProducts:[],category:void 0,pageType:void 0,paymentOption:void 0,purchaseOrderId:void 0,query:void 0,resultsNo:void 0,revenue:void 0,shipping:void 0,tax:void 0,coupon:void 0},productImpressionPosition=1,productImpressions={};function push2dataLayer(e){(window.dataLayer||[]).push(e),document.domain}function processProductData(e,t,o){if(!e.length){if("home"==pandata.pageType&&"Category"==e.list&&(e.list="Homepage Product Grid"),!t){var a=new Array;for(var i in window.localStorage)-1!==i.indexOf("pandata_products_")&&a.push(i);for(n=0;n<=a.length-99;n++)window.localStorage.removeItem(a[n]);try{(list=window.localStorage.getItem("pandata_productslist_"+e.id))&&(e.list=list),window.localStorage.setItem("pandata_products_"+e.itemVrtnId,JSON.stringify(e))}catch(e){}}return e.position||(e.position=productImpressionPosition++),e}for(var r=[],n=0;n<e.length;n++){var d={};if(t){var s=JSON.parse(window.localStorage.getItem("pandata_products_"+e[n].itemVrtnId));s?(d=s).quantity=e[n].quantity:d=processProductData(e[n],t,o)}else d=processProductData(e[n],t,o);d.position=productImpressionPosition++,r.push(d)}return o&&(pandata.basketProducts=r),r}function pushEcommerce(e,t,o){var a=$.extend(!0,{},google);if(a.event=e,null!=t&&(a.resultsNo=t.hasOwnProperty("id")?1:t.length,a.ecommerce.currency_code=t[0]&&t[0].length?t[0].currency_code:"EUR"),"productImpression"==e||"quizImpression"==e){if((bannerType=window.localStorage.getItem("pandata_heroitem_banner_type"))?(a.bannerType=bannerType,window.localStorage.removeItem("pandata_heroitem_banner_type")):a.bannerType=!1,(bannerTarget=window.localStorage.getItem("pandata_heroitem_banner_target"))?(a.bannerTarget=bannerTarget,window.localStorage.removeItem("pandata_heroitem_banner_target")):a.bannerTarget=!1,t.hasOwnProperty("quantity"))t.quantity=null;else for(var i=0;i<t.length;i++)t[i].quantity=null;a.ecommerce.impressions=t,a.resultsNo||(a.resultsNo=Object.keys(t).length)}else if("newSetOfProductsLoaded"==e)a.productsInSet=t,delete a.resultsNo;else if("productClick"==e||"quizClick"==e){(bannerType=window.localStorage.getItem("pandata_heroitem_banner_type"))?(a.bannerType=bannerType,window.localStorage.removeItem("pandata_heroitem_banner_type")):a.bannerType=!1,(bannerTarget=window.localStorage.getItem("pandata_heroitem_banner_target"))?(a.bannerTarget=bannerTarget,window.localStorage.removeItem("pandata_heroitem_banner_target")):a.bannerTarget=!1,a.ecommerce.click={actionField:{list:pandata.pageType}};try{window.localStorage.setItem("pandata_productslist_"+t[0].id,t[0].list)}catch(e){}t[0].quantity=null,a.ecommerce.click.products=t}else if("productDetail"==e)(list=window.localStorage.getItem("pandata_productslist_"+t[0].id))&&(t[0].list=list),t[0].quantity=null,a.ecommerce.detail={products:t};else if("addToWishlist"==e||"addToWishlistFromMiniCart"==e)a.productAdded=window.localStorage.getItem("pandata_wishlist_added_product_name"),a.productSKU=window.localStorage.getItem("pandata_wishlist_added_product_sku"),a.productCategory=window.localStorage.getItem("pandata_wishlist_added_product_category"),"MiniCart"!=a.productCategory&&"WishList"!=a.productCategory||!(item=JSON.parse(window.localStorage.getItem("pandata_products_"+a.productSKU)))||(a.productCategory=item.category);else if("removeFromWishlist"==e||"removeFromWishlistFromMiniCart"==e)a.productRemoved=window.localStorage.getItem("pandata_wishlist_added_product_name"),a.productSKU=window.localStorage.getItem("pandata_wishlist_added_product_sku"),a.productCategory=window.localStorage.getItem("pandata_wishlist_added_product_category"),"MiniCart"!=a.productCategory&&"WishList"!=a.productCategory||!(item=JSON.parse(window.localStorage.getItem("pandata_products_"+a.productSKU)))||(a.productCategory=item.category);else if("addToCart"==e||"readdToCart"==e||"readdToMiniCart"==e)(list=window.localStorage.getItem("pandata_productslist_"+t[0].id))&&(t[0].list=list),a.ecommerce.add={products:t};else if("removeFromCart"==e||"removeFromMiniCart"==e)a.ecommerce.remove={products:t};else if("checkout1"==e)a.ecommerce.checkout={actionField:{step:1},products:t};else if("checkout2"==e)a.ecommerce.checkout={actionField:{step:2},option:pandata.paymentOption,products:t};else if("purchase"==e)a.buyerId=void 0,a.ecommerce.purchase={actionField:{id:pandata.purchaseOrderId?pandata.purchaseOrderId:void 0,revenue:pandata.revenue,shipping:pandata.shipping,tax:pandata.tax,coupon:pandata.coupon},products:t};else if("login"==e)window.localStorage.getItem("pandata_login_type")&&(a.loginType=window.localStorage.getItem("pandata_login_type")),a.userId=window.localStorage.getItem("pandata_login_userid"),"account"!=a.loginType&&(a.referrer=window.location.origin);else if("registrationFlow1"==e)a.registrationStep="Registriere Dich Jetzt";else if("registrationFlow2"==e)a.registrationStep="Captcha Complete";else if("registrationFlow2/3"==e){a.registrationStep="Social Signup Click","account"!=(r=window.localStorage.getItem("pandata_login_type"))&&(a.registrationMethod=r)}else if("registrationFlow3"==e)a.registrationStep="Registration Form Complete";else if("registrationFlow4"==e){var r;a.registrationStep="Registration Complete","account"!=(r=window.localStorage.getItem("pandata_login_type"))&&(a.registrationMethod=r)}push2dataLayer(a)}function visibleInViewport(e){var t=e.getBoundingClientRect();return pixel_tolerance=11,t.top>=-pixel_tolerance&&t.left>=-pixel_tolerance&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)+pixel_tolerance&&t.right<=(window.innerWidth||document.documentElement.clientWidth)+pixel_tolerance}function notResizing(){window.isResizing=!1,checkProductImpressions()}function slickSlideCheck(e){var t=e.closest(".slick-slide");return!t.length||t.hasClass("slick-active")}function checkProductImpressions(){if(!window.isResizing)for(var e in productImpressions){var t=$(productImpressions[e].el);productImpressions[e]&&t.is(":visible")&&visibleInViewport(productImpressions[e].el)&&slickSlideCheck(t.parent().parent())&&(productImpressions[e].cb(),productImpressions[e]=!1)}}window.isResizing=!1,$(window).on("resize",function(e){clearTimeout(window.isResizing),window.isResizing=setTimeout(notResizing,666)}),window.addEventListener("load",function(e){checkProductImpressions()}),window.addEventListener("scroll",function(e){checkProductImpressions()});